// <auto-generated>
/*
 * AI Stats Gateway API
 *
 * Programmatic access to the AI Stats AI Gateway. All endpoints forward requests to the best available provider for the specified model, and return normalised responses with clear structured metadata.
 *
 * The version of the OpenAPI document: 0.1.0
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

#nullable enable

using System;
using System.Collections;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.IO;
using System.Text;
using System.Text.RegularExpressions;
using System.Text.Json;
using System.Text.Json.Serialization;
using System.ComponentModel.DataAnnotations;
using AIStatsSdk.Client;

namespace AIStatsSdk.Model
{
    /// <summary>
    /// Metadata added by the gateway to every successful response.
    /// </summary>
    public partial class GatewayMetadata : IValidatableObject
    {
        /// <summary>
        /// Initializes a new instance of the <see cref="GatewayMetadata" /> class.
        /// </summary>
        /// <param name="requestId">requestId</param>
        /// <param name="provider">provider</param>
        /// <param name="endpoint">endpoint</param>
        /// <param name="model">model</param>
        /// <param name="appTitle">appTitle</param>
        /// <param name="referer">referer</param>
        /// <param name="timing">Optional timing information captured during the request lifecycle.</param>
        [JsonConstructor]
        public GatewayMetadata(string requestId, string provider, string endpoint, ModelId model, Option<string?> appTitle = default, Option<string?> referer = default, Option<Object?> timing = default)
        {
            RequestId = requestId;
            Provider = provider;
            Endpoint = endpoint;
            Model = model;
            AppTitleOption = appTitle;
            RefererOption = referer;
            TimingOption = timing;
            OnCreated();
        }

        partial void OnCreated();

        /// <summary>
        /// Gets or Sets Model
        /// </summary>
        [JsonPropertyName("model")]
        public ModelId Model { get; set; }

        /// <summary>
        /// Gets or Sets RequestId
        /// </summary>
        [JsonPropertyName("requestId")]
        public string RequestId { get; set; }

        /// <summary>
        /// Gets or Sets Provider
        /// </summary>
        [JsonPropertyName("provider")]
        public string Provider { get; set; }

        /// <summary>
        /// Gets or Sets Endpoint
        /// </summary>
        [JsonPropertyName("endpoint")]
        public string Endpoint { get; set; }

        /// <summary>
        /// Used to track the state of AppTitle
        /// </summary>
        [JsonIgnore]
        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        public Option<string?> AppTitleOption { get; private set; }

        /// <summary>
        /// Gets or Sets AppTitle
        /// </summary>
        [JsonPropertyName("appTitle")]
        public string? AppTitle { get { return this.AppTitleOption; } set { this.AppTitleOption = new(value); } }

        /// <summary>
        /// Used to track the state of Referer
        /// </summary>
        [JsonIgnore]
        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        public Option<string?> RefererOption { get; private set; }

        /// <summary>
        /// Gets or Sets Referer
        /// </summary>
        [JsonPropertyName("referer")]
        public string? Referer { get { return this.RefererOption; } set { this.RefererOption = new(value); } }

        /// <summary>
        /// Used to track the state of Timing
        /// </summary>
        [JsonIgnore]
        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        public Option<Object?> TimingOption { get; private set; }

        /// <summary>
        /// Optional timing information captured during the request lifecycle.
        /// </summary>
        /// <value>Optional timing information captured during the request lifecycle.</value>
        [JsonPropertyName("timing")]
        public Object? Timing { get { return this.TimingOption; } set { this.TimingOption = new(value); } }

        /// <summary>
        /// Returns the string presentation of the object
        /// </summary>
        /// <returns>String presentation of the object</returns>
        public override string ToString()
        {
            StringBuilder sb = new StringBuilder();
            sb.Append("class GatewayMetadata {\n");
            sb.Append("  RequestId: ").Append(RequestId).Append("\n");
            sb.Append("  Provider: ").Append(Provider).Append("\n");
            sb.Append("  Endpoint: ").Append(Endpoint).Append("\n");
            sb.Append("  Model: ").Append(Model).Append("\n");
            sb.Append("  AppTitle: ").Append(AppTitle).Append("\n");
            sb.Append("  Referer: ").Append(Referer).Append("\n");
            sb.Append("  Timing: ").Append(Timing).Append("\n");
            sb.Append("}\n");
            return sb.ToString();
        }

        /// <summary>
        /// To validate all properties of the instance
        /// </summary>
        /// <param name="validationContext">Validation context</param>
        /// <returns>Validation Result</returns>
        IEnumerable<ValidationResult> IValidatableObject.Validate(ValidationContext validationContext)
        {
            yield break;
        }
    }

    /// <summary>
    /// A Json converter for type <see cref="GatewayMetadata" />
    /// </summary>
    public class GatewayMetadataJsonConverter : JsonConverter<GatewayMetadata>
    {
        /// <summary>
        /// Deserializes json to <see cref="GatewayMetadata" />
        /// </summary>
        /// <param name="utf8JsonReader"></param>
        /// <param name="typeToConvert"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <returns></returns>
        /// <exception cref="JsonException"></exception>
        public override GatewayMetadata Read(ref Utf8JsonReader utf8JsonReader, Type typeToConvert, JsonSerializerOptions jsonSerializerOptions)
        {
            int currentDepth = utf8JsonReader.CurrentDepth;

            if (utf8JsonReader.TokenType != JsonTokenType.StartObject && utf8JsonReader.TokenType != JsonTokenType.StartArray)
                throw new JsonException();

            JsonTokenType startingTokenType = utf8JsonReader.TokenType;

            Option<string?> requestId = default;
            Option<string?> provider = default;
            Option<string?> endpoint = default;
            Option<ModelId?> model = default;
            Option<string?> appTitle = default;
            Option<string?> referer = default;
            Option<Object?> timing = default;

            while (utf8JsonReader.Read())
            {
                if (startingTokenType == JsonTokenType.StartObject && utf8JsonReader.TokenType == JsonTokenType.EndObject && currentDepth == utf8JsonReader.CurrentDepth)
                    break;

                if (startingTokenType == JsonTokenType.StartArray && utf8JsonReader.TokenType == JsonTokenType.EndArray && currentDepth == utf8JsonReader.CurrentDepth)
                    break;

                if (utf8JsonReader.TokenType == JsonTokenType.PropertyName && currentDepth == utf8JsonReader.CurrentDepth - 1)
                {
                    string? localVarJsonPropertyName = utf8JsonReader.GetString();
                    utf8JsonReader.Read();

                    switch (localVarJsonPropertyName)
                    {
                        case "requestId":
                            requestId = new Option<string?>(utf8JsonReader.GetString()!);
                            break;
                        case "provider":
                            provider = new Option<string?>(utf8JsonReader.GetString()!);
                            break;
                        case "endpoint":
                            endpoint = new Option<string?>(utf8JsonReader.GetString()!);
                            break;
                        case "model":
                            string? modelRawValue = utf8JsonReader.GetString();
                            if (modelRawValue != null)
                                model = new Option<ModelId?>(ModelIdValueConverter.FromStringOrDefault(modelRawValue));
                            break;
                        case "appTitle":
                            appTitle = new Option<string?>(utf8JsonReader.GetString()!);
                            break;
                        case "referer":
                            referer = new Option<string?>(utf8JsonReader.GetString()!);
                            break;
                        case "timing":
                            timing = new Option<Object?>(JsonSerializer.Deserialize<Object>(ref utf8JsonReader, jsonSerializerOptions)!);
                            break;
                        default:
                            break;
                    }
                }
            }

            if (!requestId.IsSet)
                throw new ArgumentException("Property is required for class GatewayMetadata.", nameof(requestId));

            if (!provider.IsSet)
                throw new ArgumentException("Property is required for class GatewayMetadata.", nameof(provider));

            if (!endpoint.IsSet)
                throw new ArgumentException("Property is required for class GatewayMetadata.", nameof(endpoint));

            if (!model.IsSet)
                throw new ArgumentException("Property is required for class GatewayMetadata.", nameof(model));

            if (requestId.IsSet && requestId.Value == null)
                throw new ArgumentNullException(nameof(requestId), "Property is not nullable for class GatewayMetadata.");

            if (provider.IsSet && provider.Value == null)
                throw new ArgumentNullException(nameof(provider), "Property is not nullable for class GatewayMetadata.");

            if (endpoint.IsSet && endpoint.Value == null)
                throw new ArgumentNullException(nameof(endpoint), "Property is not nullable for class GatewayMetadata.");

            if (model.IsSet && model.Value == null)
                throw new ArgumentNullException(nameof(model), "Property is not nullable for class GatewayMetadata.");

            if (appTitle.IsSet && appTitle.Value == null)
                throw new ArgumentNullException(nameof(appTitle), "Property is not nullable for class GatewayMetadata.");

            if (referer.IsSet && referer.Value == null)
                throw new ArgumentNullException(nameof(referer), "Property is not nullable for class GatewayMetadata.");

            if (timing.IsSet && timing.Value == null)
                throw new ArgumentNullException(nameof(timing), "Property is not nullable for class GatewayMetadata.");

            return new GatewayMetadata(requestId.Value!, provider.Value!, endpoint.Value!, model.Value!.Value!, appTitle, referer, timing);
        }

        /// <summary>
        /// Serializes a <see cref="GatewayMetadata" />
        /// </summary>
        /// <param name="writer"></param>
        /// <param name="gatewayMetadata"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <exception cref="NotImplementedException"></exception>
        public override void Write(Utf8JsonWriter writer, GatewayMetadata gatewayMetadata, JsonSerializerOptions jsonSerializerOptions)
        {
            writer.WriteStartObject();

            WriteProperties(writer, gatewayMetadata, jsonSerializerOptions);
            writer.WriteEndObject();
        }

        /// <summary>
        /// Serializes the properties of <see cref="GatewayMetadata" />
        /// </summary>
        /// <param name="writer"></param>
        /// <param name="gatewayMetadata"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <exception cref="NotImplementedException"></exception>
        public void WriteProperties(Utf8JsonWriter writer, GatewayMetadata gatewayMetadata, JsonSerializerOptions jsonSerializerOptions)
        {
            if (gatewayMetadata.RequestId == null)
                throw new ArgumentNullException(nameof(gatewayMetadata.RequestId), "Property is required for class GatewayMetadata.");

            if (gatewayMetadata.Provider == null)
                throw new ArgumentNullException(nameof(gatewayMetadata.Provider), "Property is required for class GatewayMetadata.");

            if (gatewayMetadata.Endpoint == null)
                throw new ArgumentNullException(nameof(gatewayMetadata.Endpoint), "Property is required for class GatewayMetadata.");

            if (gatewayMetadata.AppTitleOption.IsSet && gatewayMetadata.AppTitle == null)
                throw new ArgumentNullException(nameof(gatewayMetadata.AppTitle), "Property is required for class GatewayMetadata.");

            if (gatewayMetadata.RefererOption.IsSet && gatewayMetadata.Referer == null)
                throw new ArgumentNullException(nameof(gatewayMetadata.Referer), "Property is required for class GatewayMetadata.");

            if (gatewayMetadata.TimingOption.IsSet && gatewayMetadata.Timing == null)
                throw new ArgumentNullException(nameof(gatewayMetadata.Timing), "Property is required for class GatewayMetadata.");

            writer.WriteString("requestId", gatewayMetadata.RequestId);

            writer.WriteString("provider", gatewayMetadata.Provider);

            writer.WriteString("endpoint", gatewayMetadata.Endpoint);

            var modelRawValue = ModelIdValueConverter.ToJsonValue(gatewayMetadata.Model);
            writer.WriteString("model", modelRawValue);

            if (gatewayMetadata.AppTitleOption.IsSet)
                writer.WriteString("appTitle", gatewayMetadata.AppTitle);

            if (gatewayMetadata.RefererOption.IsSet)
                writer.WriteString("referer", gatewayMetadata.Referer);

            if (gatewayMetadata.TimingOption.IsSet)
            {
                writer.WritePropertyName("timing");
                JsonSerializer.Serialize(writer, gatewayMetadata.Timing, jsonSerializerOptions);
            }
        }
    }
}
